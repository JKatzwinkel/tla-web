<?xml version="1.0"?>
<html xmlns:th="http://thymeleaf.org">

  <body>

    <form id="dict-search" name="dict-search" th:action="@{/lemma/search}" th:object="${lemmaSearchForm}" method="get">
      <div class="form-group row bg-grey">
        <label class="col-form-label col-xl-2" th:text="#{field_label_script}">Script</label>
        <div class="col-xl-10">
          <div th:each="item : ${allScripts}" class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" th:field="*{script}" th:value="${item}"/>
            <label class="form-check-label" th:for="${#ids.prev('script')}" th:text="#{'dict_' + ${item}}"/>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-form-label col-xl-2" for="transcription" th:text="#{field_label_transcription}">Transcription</label>
        <div class="col-xl-10">
          <input class="bbaw-libertine form-control mb-3" type="text" th:field="*{transcription}" name="transcription"/>
        </div>
      </div>

      <div class="form-group row bg-grey">
        <label class="col-form-label col-xl-2" for="word-class-type" th:text="#{field_label_word_class_type}">Word Class</label>
        <div class="col-xl-10">
          <select class="form-control" id="word-class-type" name="word-class-type" th:field="*{pos.type}">
            <option th:each="wordClass : ${wordClasses}" th:value="${wordClass.key}" th:text="#{'field_value_label_word_class_type_' + ${wordClass.key}}">Type</option>
          </select>
          <select th:unless="${#lists.isEmpty(wordClass.value)}" th:each="wordClass : ${wordClasses}" th:id="'word-class-type-hidden-options-' + ${wordClass.key}" hidden="true">
            <option th:each="subtype : ${wordClass.value}" th:value="${subtype}" th:text="${subtype}">Subtype</option>
          </select>
        </div>
        <label class="col-form-label col-xl-2" for="word-class-subtype" th:text="#{field_label_word_class_subtype}">Subtype</label>
        <div class="col-xl-10">
          <select class="form-control" id="word-class-subtype" name="word-class-subtype" th:field="*{pos.subtype}">
            <script th:inline="javascript">
              //<![CDATA[
              $('#word-class-type').on('input', () => {
                let options = $('#word-class-type-hidden-options-' + $('#word-class-type').val());
                let dropdown = $('#word-class-subtype');
                if (options.children('option').length > 0) {
                  dropdown.html(options.html());
                } else {
                  dropdown.html('');
                }
                dropdown.attr('hidden', options.children('option').length < 1);
              });
              //]]>
            </script>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-form-label col-xl-2" for="root_transcription" th:text="#{field_label_root_transcription}">Root</label>
        <div class="col-xl-10">
          <input class="bbaw-libertine form-control mb-3" type="text" th:field="*{root}" name="root_transcription"/>
        </div>
      </div>

      <div class="form-group row bg-grey">
        <label class="col-form-label col-xl-2" for="translation" th:text="#{field_label_translation}">Translation</label>
        <div class="col-xl-10">
          <input class="form-control mb-3" type="text" th:field="*{translation.text}" name="translation"/>
          <div th:each="lang : ${allTranslationLanguages}" class="form-check form-check-inline">
            <input class="form-check-input" type="checkbox" th:field="*{translation.lang}" th:value="${lang}"/>
            <label class="form-check-label" th:for="${#ids.prev('translation.lang')}" th:text="#{'lang_label_' + ${lang}}">Language</label>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-form-label col-xl-2" for="bibliography" th:text="#{field_label_bibliography}">Bibliography</label>
        <div class="col-xl-10">
          <input class="form-control mb-3" type="text" th:field="*{bibliography}" name="bibliography"/>
        </div>
      </div>

    </form>

  </body>
</html>