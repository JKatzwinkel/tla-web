<script th:fragment="autocomplete(field)" th:inline="javascript">
  //<![CDATA[
  {
    let field = /*[[${field}]]*/ null;
    $(`#${field}`).on('input', (e) => {
      $.ajax(
        {
          url: 'http://localhost:8090/lemma/complete', // TODO
          data: {
            q: $(`#field`).val()
          },
          success: (result) => {
            $(`#${field}-suggestions`).empty();
            result.forEach((i) => {
              $('<option/>').text(i.name).attr('value', i.id).attr('label', i.name).appendTo(
                $(`#${field}-suggestions`)
              );
            });
          }
        }
      );
    });
  }
  //]]>
</script>